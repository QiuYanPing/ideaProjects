02:00:19:685  WARN 17496 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7h6m19s661ms671µs900ns).
03:04:33:100  WARN 17496 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9m12s479ms275µs100ns).
05:28:11:048  WARN 17496 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m5s633ms573µs500ns).
12:29:09:540  INFO 17496 --- [lettuce-nioEventLoop-6-1] io.lettuce.core.protocol.CommandHandler  : null Unexpected exception during request: java.io.IOException: 远程主机强迫关闭了一个现有的连接。

java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at java.base/sun.nio.ch.SocketDispatcher.read0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:276) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.read(IOUtil.java:233) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.read(IOUtil.java:223) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:358) ~[na:na]
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

12:29:09:719  INFO 17496 --- [lettuce-eventExecutorLoop-4-6] i.l.core.protocol.ConnectionWatchdog     : Reconnecting, last destination was /192.168.15.155:6379
13:14:57:975  WARN 17496 --- [lettuce-nioEventLoop-6-2] i.l.core.protocol.ConnectionWatchdog     : Cannot reconnect to [192.168.15.155:6379]: java.nio.channels.ClosedChannelException

java.nio.channels.ClosedChannelException: null
	at io.netty.channel.nio.AbstractNioChannel.doClose(AbstractNioChannel.java:502) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.socket.nio.NioSocketChannel.doClose(NioSocketChannel.java:349) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.doClose0(AbstractChannel.java:754) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.close(AbstractChannel.java:731) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.close(AbstractChannel.java:620) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.close(DefaultChannelPipeline.java:1352) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeClose(AbstractChannelHandlerContext.java:749) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.access$1200(AbstractChannelHandlerContext.java:61) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext$11.run(AbstractChannelHandlerContext.java:732) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

13:14:58:012  INFO 17496 --- [lettuce-eventExecutorLoop-4-8] i.l.core.protocol.ConnectionWatchdog     : Reconnecting, last destination was 192.168.15.155:6379
13:14:58:042  WARN 17496 --- [lettuce-nioEventLoop-6-3] i.l.core.protocol.ConnectionWatchdog     : Cannot reconnect to [192.168.15.155:6379]: No route to host: no further information: /192.168.15.155:6379

io.netty.channel.AbstractChannel$AnnotatedNoRouteToHostException: No route to host: no further information: /192.168.15.155:6379
Caused by: java.net.NoRouteToHostException: No route to host: no further information
	at java.base/sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:779) ~[na:na]
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

13:15:03:314  INFO 17496 --- [lettuce-eventExecutorLoop-4-2] i.l.core.protocol.ConnectionWatchdog     : Reconnecting, last destination was 192.168.15.155:6379
13:15:04:909  INFO 17496 --- [lettuce-nioEventLoop-6-13] i.l.core.protocol.ReconnectionHandler    : Reconnected to 192.168.15.155:6379
13:15:11:784  WARN 17496 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7h2m37s297ms505µs600ns).
17:25:13:541  WARN 17496 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h25m24s24ms460µs500ns).
19:59:49:722  WARN 17496 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=23m4s182ms756µs100ns).
20:06:52:459  INFO 7928 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 7928 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:06:52:460 DEBUG 7928 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
20:06:52:460  INFO 7928 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
20:06:52:954  INFO 7928 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:06:52:955  INFO 7928 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:06:52:976  INFO 7928 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
20:06:53:299  INFO 7928 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
20:06:53:305  INFO 7928 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
20:06:53:306  INFO 7928 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
20:06:53:400  INFO 7928 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
20:06:53:400  INFO 7928 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 910 ms
20:06:54:609  INFO 7928 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:06:54:658  INFO 7928 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:06:54:764  INFO 7928 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
20:06:54:764  INFO 7928 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:06:54:766  INFO 7928 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:06:54:783  INFO 7928 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:06:54:872  INFO 7928 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 2.691 seconds (JVM running for 3.495)
20:06:54:874  INFO 7928 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:06:55:087  INFO 7928 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:06:55:286  INFO 7928 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:06:55:292  INFO 7928 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
20:08:32:314  INFO 2948 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 2948 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:08:32:316 DEBUG 2948 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
20:08:32:316  INFO 2948 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
20:08:32:778  INFO 2948 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:08:32:779  INFO 2948 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:08:32:802  INFO 2948 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
20:08:33:096  INFO 2948 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
20:08:33:102  INFO 2948 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
20:08:33:103  INFO 2948 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
20:08:33:183  INFO 2948 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
20:08:33:183  INFO 2948 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 844 ms
20:08:34:302  INFO 2948 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:08:34:350  INFO 2948 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:08:34:445  INFO 2948 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
20:08:34:446  INFO 2948 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:08:34:447  INFO 2948 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:08:34:474  INFO 2948 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:08:34:558  INFO 2948 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 2.473 seconds (JVM running for 3.245)
20:08:34:559  INFO 2948 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:08:34:710  INFO 2948 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:08:34:909  INFO 2948 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:08:34:916  INFO 2948 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
20:08:39:077  INFO 2948 --- [http-nio-8000-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
20:08:39:078  INFO 2948 --- [http-nio-8000-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
20:08:39:079  INFO 2948 --- [http-nio-8000-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
20:08:39:505 ERROR 2948 --- [http-nio-8000-exec-7] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:08:53:240 ERROR 2948 --- [http-nio-8000-exec-8] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:09:26:159 DEBUG 2948 --- [http-nio-8000-exec-9] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:09:26:190 DEBUG 2948 --- [http-nio-8000-exec-9] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 1240123123@qq.com(String)
20:09:26:216 DEBUG 2948 --- [http-nio-8000-exec-9] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 0
20:09:26:226 ERROR 2948 --- [http-nio-8000-exec-9] c.q.c.exception.GlobalExceptionHandler   : 请求地址:/api/account/login错误
20:09:33:250 ERROR 2948 --- [http-nio-8000-exec-3] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:09:53:027 DEBUG 2948 --- [http-nio-8000-exec-10] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:09:53:028 DEBUG 2948 --- [http-nio-8000-exec-10] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
20:09:53:029 DEBUG 2948 --- [http-nio-8000-exec-10] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 0
20:09:53:053 DEBUG 2948 --- [http-nio-8000-exec-10] com.qyp.chat.mapper.UserMapper.insert    : ==>  Preparing: INSERT INTO user ( user_id, email, nick_name, join_type, password, status, create_time, last_off_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
20:09:53:058 DEBUG 2948 --- [http-nio-8000-exec-10] com.qyp.chat.mapper.UserMapper.insert    : ==> Parameters: U4ktmnan96r8(String), 2740123221@qq.com(String), 第一人(String), 1(Integer), e10adc3949ba59abbe56e057f20f883e(String), 1(Integer), 2025-01-19T20:09:53.049234900(LocalDateTime), 1737288593049(Long)
20:09:53:063 DEBUG 2948 --- [http-nio-8000-exec-10] com.qyp.chat.mapper.UserMapper.insert    : <==    Updates: 1
20:09:53:069 DEBUG 2948 --- [http-nio-8000-exec-10] c.qyp.chat.mapper.ContactMapper.insert   : ==>  Preparing: INSERT INTO contact ( user_id, contact_id, contact_type, create_time, status, last_update_time ) VALUES ( ?, ?, ?, ?, ?, ? )
20:09:53:071 DEBUG 2948 --- [http-nio-8000-exec-10] c.qyp.chat.mapper.ContactMapper.insert   : ==> Parameters: U4ktmnan96r8(String), U12345678901(String), 0(Integer), 2025-01-19T20:09:53.067161900(LocalDateTime), 1(Integer), 2025-01-19T20:09:53.067161900(LocalDateTime)
20:09:53:076 DEBUG 2948 --- [http-nio-8000-exec-10] c.qyp.chat.mapper.ContactMapper.insert   : <==    Updates: 1
20:09:53:123 DEBUG 2948 --- [http-nio-8000-exec-10] c.q.c.mapper.UserSessionMapper.insert    : ==>  Preparing: INSERT INTO user_session ( user_id, contact_id, session_id, contact_name ) VALUES ( ?, ?, ?, ? )
20:09:53:124 DEBUG 2948 --- [http-nio-8000-exec-10] c.q.c.mapper.UserSessionMapper.insert    : ==> Parameters: U4ktmnan96r8(String), U12345678901(String), bb459ff9ec670ec45b0ddbfe75fe845b(String), robot(String)
20:09:53:131 DEBUG 2948 --- [http-nio-8000-exec-10] c.q.c.mapper.UserSessionMapper.insert    : <==    Updates: 1
20:09:53:136 DEBUG 2948 --- [http-nio-8000-exec-10] c.qyp.chat.mapper.MessageMapper.insert   : ==>  Preparing: INSERT INTO messsage ( session_id, message_type, message_content, send_user_id, send_time, contact_id, contact_type, status ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
20:09:53:138 DEBUG 2948 --- [http-nio-8000-exec-10] c.qyp.chat.mapper.MessageMapper.insert   : ==> Parameters: bb459ff9ec670ec45b0ddbfe75fe845b(String), 2(Integer), 你好啊！！(String), U4ktmnan96r8(String), 1737317393067(Long), U12345678901(String), 0(Integer), 1(Integer)
20:09:53:230 ERROR 2948 --- [http-nio-8000-exec-10] c.q.c.exception.GlobalExceptionHandler   : 请求地址:/api/account/register错误
20:11:00:172  INFO 26448 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 26448 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:11:00:174 DEBUG 26448 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
20:11:00:174  INFO 26448 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
20:11:00:655  INFO 26448 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:11:00:656  INFO 26448 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:11:00:677  INFO 26448 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
20:11:00:973  INFO 26448 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
20:11:00:978  INFO 26448 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
20:11:00:978  INFO 26448 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
20:11:01:060  INFO 26448 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
20:11:01:060  INFO 26448 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 849 ms
20:11:02:193  INFO 26448 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:11:02:242  INFO 26448 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:11:02:347  INFO 26448 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
20:11:02:348  INFO 26448 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:11:02:349  INFO 26448 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:11:02:367  INFO 26448 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:11:02:480  INFO 26448 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 2.568 seconds (JVM running for 3.292)
20:11:02:481  INFO 26448 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:11:02:635  INFO 26448 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:11:02:839  INFO 26448 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:11:02:846  INFO 26448 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
20:11:05:042  INFO 26448 --- [http-nio-8000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
20:11:05:043  INFO 26448 --- [http-nio-8000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
20:11:05:044  INFO 26448 --- [http-nio-8000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
20:11:05:326 ERROR 26448 --- [http-nio-8000-exec-4] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:11:14:889 DEBUG 26448 --- [http-nio-8000-exec-5] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:11:14:921 DEBUG 26448 --- [http-nio-8000-exec-5] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
20:11:14:962 DEBUG 26448 --- [http-nio-8000-exec-5] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 1
20:11:14:976 ERROR 26448 --- [http-nio-8000-exec-5] c.q.c.exception.GlobalExceptionHandler   : 请求地址:/api/account/register错误
20:12:35:868  INFO 6940 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 6940 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:12:35:869 DEBUG 6940 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
20:12:35:869  INFO 6940 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
20:12:36:327  INFO 6940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:12:36:329  INFO 6940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:12:36:348  INFO 6940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
20:12:36:626  INFO 6940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
20:12:36:630  INFO 6940 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
20:12:36:631  INFO 6940 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
20:12:36:709  INFO 6940 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
20:12:36:709  INFO 6940 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 818 ms
20:12:37:860  INFO 6940 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:12:37:910  INFO 6940 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:12:38:010  INFO 6940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
20:12:38:011  INFO 6940 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:12:38:012  INFO 6940 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:12:38:029  INFO 6940 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:12:38:122  INFO 6940 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 2.472 seconds (JVM running for 3.106)
20:12:38:124  INFO 6940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:12:38:286  INFO 6940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:12:38:470  INFO 6940 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:12:38:476  INFO 6940 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
20:13:25:150  INFO 6940 --- [http-nio-8000-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
20:13:25:151  INFO 6940 --- [http-nio-8000-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
20:13:25:152  INFO 6940 --- [http-nio-8000-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
20:13:25:239 DEBUG 6940 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:13:25:251 DEBUG 6940 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
20:13:25:260 DEBUG 6940 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 0
20:13:25:270 DEBUG 6940 --- [http-nio-8000-exec-3] com.qyp.chat.mapper.UserMapper.insert    : ==>  Preparing: INSERT INTO user ( user_id, email, nick_name, join_type, password, status, create_time, last_off_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
20:13:25:272 DEBUG 6940 --- [http-nio-8000-exec-3] com.qyp.chat.mapper.UserMapper.insert    : ==> Parameters: Ufkqcj63anhy(String), 2740123221@qq.com(String), 第一人(String), 1(Integer), e10adc3949ba59abbe56e057f20f883e(String), 1(Integer), 2025-01-19T20:13:25.268872400(LocalDateTime), 1737288805268(Long)
20:13:25:274 DEBUG 6940 --- [http-nio-8000-exec-3] com.qyp.chat.mapper.UserMapper.insert    : <==    Updates: 1
20:13:25:324 DEBUG 6940 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.ContactMapper.insert   : ==>  Preparing: INSERT INTO contact ( user_id, contact_id, contact_type, create_time, status, last_update_time ) VALUES ( ?, ?, ?, ?, ?, ? )
20:13:25:325 DEBUG 6940 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.ContactMapper.insert   : ==> Parameters: Ufkqcj63anhy(String), U12345678901(String), 0(Integer), 2025-01-19T20:13:25.321036400(LocalDateTime), 1(Integer), 2025-01-19T20:13:25.321036400(LocalDateTime)
20:13:25:330 DEBUG 6940 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.ContactMapper.insert   : <==    Updates: 1
20:13:25:346 DEBUG 6940 --- [http-nio-8000-exec-3] c.q.c.mapper.UserSessionMapper.insert    : ==>  Preparing: INSERT INTO user_session ( user_id, contact_id, session_id, contact_name ) VALUES ( ?, ?, ?, ? )
20:13:25:346 DEBUG 6940 --- [http-nio-8000-exec-3] c.q.c.mapper.UserSessionMapper.insert    : ==> Parameters: Ufkqcj63anhy(String), U12345678901(String), c2b6d0bb589aad5211af94943abeeb4d(String), robot(String)
20:13:25:347 DEBUG 6940 --- [http-nio-8000-exec-3] c.q.c.mapper.UserSessionMapper.insert    : <==    Updates: 1
20:13:25:349 DEBUG 6940 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.MessageMapper.insert   : ==>  Preparing: INSERT INTO message ( session_id, message_type, message_content, send_user_id, send_time, contact_id, contact_type, status ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
20:13:25:349 DEBUG 6940 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.MessageMapper.insert   : ==> Parameters: c2b6d0bb589aad5211af94943abeeb4d(String), 2(Integer), 你好啊！！(String), Ufkqcj63anhy(String), 1737317605321(Long), U12345678901(String), 0(Integer), 1(Integer)
20:13:25:351 DEBUG 6940 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.MessageMapper.insert   : <==    Updates: 1
20:15:17:555  INFO 21124 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 21124 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:15:17:556 DEBUG 21124 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
20:15:17:557  INFO 21124 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
20:15:18:016  INFO 21124 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:15:18:017  INFO 21124 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:15:18:038  INFO 21124 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
20:15:18:334  INFO 21124 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
20:15:18:338  INFO 21124 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
20:15:18:338  INFO 21124 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
20:15:18:419  INFO 21124 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
20:15:18:419  INFO 21124 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 839 ms
20:15:19:529  INFO 21124 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:15:19:576  INFO 21124 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:15:19:671  INFO 21124 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
20:15:19:672  INFO 21124 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:15:19:674  INFO 21124 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:15:19:689  INFO 21124 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:15:19:777  INFO 21124 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 2.462 seconds (JVM running for 3.055)
20:15:19:779  INFO 21124 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:15:19:934  INFO 21124 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:15:20:119  INFO 21124 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:15:20:125  INFO 21124 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
20:15:30:111  INFO 21124 --- [http-nio-8000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
20:15:30:111  INFO 21124 --- [http-nio-8000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
20:15:30:112  INFO 21124 --- [http-nio-8000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
20:15:30:201 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:15:30:212 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
20:15:30:224 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 0
20:15:30:234 DEBUG 21124 --- [http-nio-8000-exec-1] com.qyp.chat.mapper.UserMapper.insert    : ==>  Preparing: INSERT INTO user ( user_id, email, nick_name, join_type, password, status, create_time, last_off_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
20:15:30:236 DEBUG 21124 --- [http-nio-8000-exec-1] com.qyp.chat.mapper.UserMapper.insert    : ==> Parameters: Uvhzi47svssc(String), 2740123221@qq.com(String), 第一人(String), 1(Integer), e10adc3949ba59abbe56e057f20f883e(String), 1(Integer), 2025-01-19T20:15:30.232883300(LocalDateTime), 1737288930232(Long)
20:15:30:238 DEBUG 21124 --- [http-nio-8000-exec-1] com.qyp.chat.mapper.UserMapper.insert    : <==    Updates: 1
20:15:30:240 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.ContactMapper.insert   : ==>  Preparing: INSERT INTO contact ( user_id, contact_id, contact_type, create_time, status, last_update_time ) VALUES ( ?, ?, ?, ?, ?, ? )
20:15:30:241 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.ContactMapper.insert   : ==> Parameters: Uvhzi47svssc(String), U12345678901(String), 0(Integer), 2025-01-19T20:15:30.240207(LocalDateTime), 1(Integer), 2025-01-19T20:15:30.240207(LocalDateTime)
20:15:30:243 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.ContactMapper.insert   : <==    Updates: 1
20:15:30:256 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.SessionMapper.insert   : ==>  Preparing: INSERT INTO session ( session_id, last_message, last_receive_time ) VALUES ( ?, ?, ? )
20:15:30:256 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.SessionMapper.insert   : ==> Parameters: b8ca614269ca3f64d2880c232137ea46(String), 你好啊！！(String), 1737317730240(Long)
20:15:30:257 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.SessionMapper.insert   : <==    Updates: 1
20:15:30:258 DEBUG 21124 --- [http-nio-8000-exec-1] c.q.c.mapper.UserSessionMapper.insert    : ==>  Preparing: INSERT INTO user_session ( user_id, contact_id, session_id, contact_name ) VALUES ( ?, ?, ?, ? )
20:15:30:258 DEBUG 21124 --- [http-nio-8000-exec-1] c.q.c.mapper.UserSessionMapper.insert    : ==> Parameters: Uvhzi47svssc(String), U12345678901(String), b8ca614269ca3f64d2880c232137ea46(String), robot(String)
20:15:30:259 DEBUG 21124 --- [http-nio-8000-exec-1] c.q.c.mapper.UserSessionMapper.insert    : <==    Updates: 1
20:15:30:261 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.MessageMapper.insert   : ==>  Preparing: INSERT INTO message ( session_id, message_type, message_content, send_user_id, send_time, contact_id, contact_type, status ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
20:15:30:261 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.MessageMapper.insert   : ==> Parameters: b8ca614269ca3f64d2880c232137ea46(String), 2(Integer), 你好啊！！(String), Uvhzi47svssc(String), 1737317730240(Long), U12345678901(String), 0(Integer), 1(Integer)
20:15:30:262 DEBUG 21124 --- [http-nio-8000-exec-1] c.qyp.chat.mapper.MessageMapper.insert   : <==    Updates: 1
20:20:45:864 ERROR 21124 --- [http-nio-8000-exec-4] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:20:52:748 DEBUG 21124 --- [http-nio-8000-exec-6] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:20:52:749 DEBUG 21124 --- [http-nio-8000-exec-6] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 1240123123@qq.com(String)
20:20:52:751 DEBUG 21124 --- [http-nio-8000-exec-6] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 0
20:20:52:756 ERROR 21124 --- [http-nio-8000-exec-6] c.q.c.exception.GlobalExceptionHandler   : 请求地址:/api/account/login错误
20:21:04:735 DEBUG 21124 --- [http-nio-8000-exec-2] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:21:04:736 DEBUG 21124 --- [http-nio-8000-exec-2] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
20:21:04:747 DEBUG 21124 --- [http-nio-8000-exec-2] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 1
20:21:04:751 DEBUG 21124 --- [http-nio-8000-exec-2] c.q.c.mapper.ContactMapper.selectList    : ==>  Preparing: SELECT user_id,contact_id,contact_type,create_time,status,last_update_time FROM contact WHERE (user_id = ? AND status = ?)
20:21:04:752 DEBUG 21124 --- [http-nio-8000-exec-2] c.q.c.mapper.ContactMapper.selectList    : ==> Parameters: Uvhzi47svssc(String), 1(Integer)
20:21:04:754 DEBUG 21124 --- [http-nio-8000-exec-2] c.q.c.mapper.ContactMapper.selectList    : <==      Total: 1
20:21:11:441 ERROR 21124 --- [http-nio-8000-exec-7] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:21:19:132 ERROR 21124 --- [http-nio-8000-exec-9] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:24:52:151  INFO 21124 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
20:24:52:205  INFO 21124 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : token:e621b1edf357294cb9a362bee8ac98d5
20:24:52:238 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
20:24:52:239 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T20:24:52.233307700(LocalDateTime), Uvhzi47svssc(String)
20:24:52:243 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
20:24:52:244 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
20:24:52:245 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Uvhzi47svssc(String)
20:24:52:246 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
20:24:52:249 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
20:24:52:250 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Uvhzi47svssc(String)
20:24:52:253 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
20:24:52:259 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
20:24:52:260 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Uvhzi47svssc(String), 1737288930232(Long)
20:24:52:261 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 1
20:24:52:267 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
20:24:52:268 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Uvhzi47svssc(String), 0(Integer), 1737288930232(Long)
20:24:52:270 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
20:27:29:808  INFO 21124 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
20:27:29:813 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_off_time=? WHERE user_id=?
20:27:29:813 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 1737289649811(Long), Uvhzi47svssc(String)
20:27:29:815 DEBUG 21124 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
20:27:49:134  INFO 17652 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 17652 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:27:49:135 DEBUG 17652 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
20:27:49:135  INFO 17652 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
20:27:49:776  INFO 17652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:27:49:779  INFO 17652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:27:49:809  INFO 17652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
20:27:50:198  INFO 17652 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
20:27:50:205  INFO 17652 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
20:27:50:205  INFO 17652 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
20:27:50:313  INFO 17652 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
20:27:50:313  INFO 17652 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1142 ms
20:27:51:780  INFO 17652 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:27:51:849  INFO 17652 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:27:52:000  INFO 17652 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
20:27:52:001  INFO 17652 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:27:52:003  INFO 17652 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:27:52:026  INFO 17652 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:27:52:146  INFO 17652 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 3.37 seconds (JVM running for 4.456)
20:27:52:148  INFO 17652 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:27:52:353  INFO 17652 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:27:52:646  INFO 17652 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:27:52:655  INFO 17652 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
20:28:02:146  INFO 17652 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
20:28:02:248  INFO 17652 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : token:e621b1edf357294cb9a362bee8ac98d5
20:28:02:323 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
20:28:02:342 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T20:28:02.270007200(LocalDateTime), Uvhzi47svssc(String)
20:28:02:345 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
20:28:02:350 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
20:28:02:350 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Uvhzi47svssc(String)
20:28:02:367 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
20:28:02:371 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
20:28:02:372 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Uvhzi47svssc(String)
20:28:02:374 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
20:28:02:394 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
20:28:02:395 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Uvhzi47svssc(String), 1737289649811(Long)
20:28:02:397 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 1
20:28:02:399 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
20:28:02:400 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Uvhzi47svssc(String), 0(Integer), 1737289649811(Long)
20:28:02:402 DEBUG 17652 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
20:33:47:701  WARN 17652 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=5m55s233ms474µs800ns).
20:33:48:179  INFO 17652 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
20:33:48:181  INFO 17652 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
20:33:48:199  INFO 17652 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
20:33:48:199  WARN 17652 --- [nioEventLoopGroup-3-1] io.netty.channel.DefaultChannelPipeline  : An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.

org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
### The error may exist in com/qyp/chat/mapper/UserMapper.java (best guess)
### The error may involve com.qyp.chat.mapper.UserMapper.updateById
### The error occurred while executing an update
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:96) ~[mybatis-spring-2.0.7.jar:2.0.7]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441) ~[mybatis-spring-2.0.7.jar:2.0.7]
	at com.sun.proxy.$Proxy84.update(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:288) ~[mybatis-spring-2.0.7.jar:2.0.7]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:64) ~[mybatis-plus-core-3.4.3.jar:3.4.3]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148) ~[mybatis-plus-core-3.4.3.jar:3.4.3]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89) ~[mybatis-plus-core-3.4.3.jar:3.4.3]
	at com.sun.proxy.$Proxy85.updateById(Unknown Source) ~[na:na]
	at com.qyp.chat.websocket.ChannelContextUtils.removeContext(ChannelContextUtils.java:138) ~[classes/:na]
	at com.qyp.chat.websocket.netty.HandlerWebSocket.channelInactive(HandlerWebSocket.java:35) ~[classes/:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:305) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelInactive(ChannelInboundHandlerAdapter.java:81) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelInactive(IdleStateHandler.java:277) ~[netty-handler-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:303) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:411) ~[netty-codec-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:376) ~[netty-codec-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:305) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:301) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:813) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask$$$capture(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasksFrom(SingleThreadEventExecutor.java:426) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:375) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.confirmShutdown(SingleThreadEventExecutor.java:763) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:596) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
### The error may exist in com/qyp/chat/mapper/UserMapper.java (best guess)
### The error may involve com.qyp.chat.mapper.UserMapper.updateById
### The error occurred while executing an update
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30) ~[mybatis-3.5.9.jar:3.5.9]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:196) ~[mybatis-3.5.9.jar:3.5.9]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427) ~[mybatis-spring-2.0.7.jar:2.0.7]
	... 38 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83) ~[spring-jdbc-5.3.27.jar:5.3.27]
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80) ~[mybatis-spring-2.0.7.jar:2.0.7]
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67) ~[mybatis-spring-2.0.7.jar:2.0.7]
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:337) ~[mybatis-3.5.9.jar:3.5.9]
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:86) ~[mybatis-3.5.9.jar:3.5.9]
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:49) ~[mybatis-3.5.9.jar:3.5.9]
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117) ~[mybatis-3.5.9.jar:3.5.9]
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76) ~[mybatis-3.5.9.jar:3.5.9]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.apache.ibatis.plugin.Invocation.proceed(Invocation.java:49) ~[mybatis-3.5.9.jar:3.5.9]
	at com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor.intercept(MybatisPlusInterceptor.java:106) ~[mybatis-plus-extension-3.4.3.jar:3.4.3]
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:62) ~[mybatis-3.5.9.jar:3.5.9]
	at com.sun.proxy.$Proxy131.update(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:64) ~[mybatis-3.5.9.jar:3.5.9]
	at com.sun.proxy.$Proxy131.update(Unknown Source) ~[na:na]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:194) ~[mybatis-3.5.9.jar:3.5.9]
	... 43 common frames omitted
Caused by: java.sql.SQLException: HikariDataSource HikariDataSource (HikariPool-1) has been closed.
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:96) ~[HikariCP-4.0.3.jar:na]
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159) ~[spring-jdbc-5.3.27.jar:5.3.27]
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117) ~[spring-jdbc-5.3.27.jar:5.3.27]
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) ~[spring-jdbc-5.3.27.jar:5.3.27]
	... 65 common frames omitted

20:33:51:021  INFO 26284 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 26284 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:33:51:023 DEBUG 26284 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
20:33:51:023  INFO 26284 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
20:33:51:518  INFO 26284 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:33:51:520  INFO 26284 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:33:51:541  INFO 26284 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
20:33:51:870  INFO 26284 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
20:33:51:876  INFO 26284 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
20:33:51:876  INFO 26284 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
20:33:51:962  INFO 26284 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
20:33:51:962  INFO 26284 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 912 ms
20:33:53:287  INFO 26284 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:33:53:336  INFO 26284 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:33:53:453  INFO 26284 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
20:33:53:454  INFO 26284 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:33:53:456  INFO 26284 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:33:53:473  INFO 26284 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:33:53:571  INFO 26284 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 2.785 seconds (JVM running for 3.469)
20:33:53:573  INFO 26284 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:33:53:736  INFO 26284 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:33:53:940  INFO 26284 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:33:53:946  INFO 26284 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
20:34:04:292  INFO 26284 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
20:34:04:378  INFO 26284 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : token:e621b1edf357294cb9a362bee8ac98d5
20:34:04:429 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
20:34:04:443 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T20:34:04.398045100(LocalDateTime), Uvhzi47svssc(String)
20:34:04:451 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
20:34:04:457 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
20:34:04:457 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Uvhzi47svssc(String)
20:34:04:469 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
20:34:04:472 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
20:34:04:473 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Uvhzi47svssc(String)
20:34:04:475 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
20:34:04:490 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
20:34:04:490 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Uvhzi47svssc(String), 1737289649811(Long)
20:34:04:493 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 1
20:34:04:497 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
20:34:04:497 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Uvhzi47svssc(String), 0(Integer), 1737289649811(Long)
20:34:04:499 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
20:34:38:030  INFO 26284 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
20:36:19:903  WARN 26284 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m40s624ms722µs700ns).
20:36:39:464 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_off_time=? WHERE user_id=?
20:36:39:465 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 1737290181671(Long), Uvhzi47svssc(String)
20:36:39:473 DEBUG 26284 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
20:37:30:323  WARN 26284 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m15s503ms85µs600ns).
20:37:30:327  WARN 26284 --- [nioEventLoopGroup-3-2] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0xd319465a, L:/127.0.0.1:5051 - R:/127.0.0.1:61139]

io.netty.channel.ChannelPipelineException: com.qyp.chat.websocket.netty.HandlerWebSocket is not a @Sharable handler, so can't be added or removed multiple times.
	at io.netty.channel.DefaultChannelPipeline.checkMultiplicity(DefaultChannelPipeline.java:600) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:202) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:381) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:370) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at com.qyp.chat.websocket.netty.NettyWebSocketStarter$1.initChannel(NettyWebSocketStarter.java:54) ~[classes/:na]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1114) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask$$$capture(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

20:37:38:449  WARN 26284 --- [nioEventLoopGroup-3-3] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0x60014c97, L:/127.0.0.1:5051 - R:/127.0.0.1:61154]

io.netty.channel.ChannelPipelineException: com.qyp.chat.websocket.netty.HandlerWebSocket is not a @Sharable handler, so can't be added or removed multiple times.
	at io.netty.channel.DefaultChannelPipeline.checkMultiplicity(DefaultChannelPipeline.java:600) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:202) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:381) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:370) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at com.qyp.chat.websocket.netty.NettyWebSocketStarter$1.initChannel(NettyWebSocketStarter.java:54) ~[classes/:na]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1114) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask$$$capture(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

20:38:11:138  WARN 26284 --- [nioEventLoopGroup-3-4] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0x597c3098, L:/127.0.0.1:5051 - R:/127.0.0.1:61167]

io.netty.channel.ChannelPipelineException: com.qyp.chat.websocket.netty.HandlerWebSocket is not a @Sharable handler, so can't be added or removed multiple times.
	at io.netty.channel.DefaultChannelPipeline.checkMultiplicity(DefaultChannelPipeline.java:600) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:202) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:381) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:370) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at com.qyp.chat.websocket.netty.NettyWebSocketStarter$1.initChannel(NettyWebSocketStarter.java:54) ~[classes/:na]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1114) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask$$$capture(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

20:38:15:371  INFO 26284 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
20:38:15:379  INFO 26284 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
20:38:18:250  INFO 26120 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 26120 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:38:18:251 DEBUG 26120 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
20:38:18:251  INFO 26120 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
20:38:18:717  INFO 26120 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:38:18:718  INFO 26120 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:38:18:739  INFO 26120 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
20:38:19:034  INFO 26120 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
20:38:19:038  INFO 26120 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
20:38:19:039  INFO 26120 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
20:38:19:118  INFO 26120 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
20:38:19:119  INFO 26120 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 846 ms
20:38:20:228  INFO 26120 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:38:20:279  INFO 26120 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:38:20:375  INFO 26120 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
20:38:20:376  INFO 26120 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:38:20:377  INFO 26120 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:38:20:402  INFO 26120 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:38:20:494  INFO 26120 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 2.457 seconds (JVM running for 3.127)
20:38:20:495  INFO 26120 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:38:20:649  INFO 26120 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:38:20:912  INFO 26120 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:38:20:918  INFO 26120 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
20:38:25:160  INFO 26120 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
20:38:25:203  INFO 26120 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : token:e621b1edf357294cb9a362bee8ac98d5
20:38:25:242 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
20:38:25:255 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T20:38:25.216341500(LocalDateTime), Uvhzi47svssc(String)
20:38:25:262 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
20:38:25:265 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
20:38:25:265 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Uvhzi47svssc(String)
20:38:25:277 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
20:38:25:280 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
20:38:25:280 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Uvhzi47svssc(String)
20:38:25:283 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
20:38:25:294 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
20:38:25:294 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Uvhzi47svssc(String), 1737290181671(Long)
20:38:25:296 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 1
20:38:25:298 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
20:38:25:298 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Uvhzi47svssc(String), 0(Integer), 1737290181671(Long)
20:38:25:300 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
20:42:42:995  INFO 21068 --- [main] com.qyp.chat.MyTest                      : Starting MyTest using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 21068 (started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:42:42:996 DEBUG 21068 --- [main] com.qyp.chat.MyTest                      : Running with Spring Boot v2.7.12, Spring v5.3.27
20:42:42:996  INFO 21068 --- [main] com.qyp.chat.MyTest                      : The following 1 profile is active: "dev"
20:42:43:676  INFO 21068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:42:43:678  INFO 21068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:42:43:714  INFO 21068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
20:42:47:465  INFO 21068 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:42:47:693  INFO 21068 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:42:47:967  INFO 21068 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:42:47:971  INFO 21068 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:42:48:005  INFO 21068 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:42:48:154  INFO 21068 --- [main] com.qyp.chat.MyTest                      : Started MyTest in 5.431 seconds (JVM running for 6.374)
20:42:48:156  INFO 21068 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:42:48:397  INFO 21068 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:42:48:727  INFO 21068 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:42:49:023  INFO 21068 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
20:42:49:045  INFO 21068 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
20:47:32:959  INFO 7140 --- [main] com.qyp.chat.MyTest                      : Starting MyTest using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 7140 (started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:47:32:960 DEBUG 7140 --- [main] com.qyp.chat.MyTest                      : Running with Spring Boot v2.7.12, Spring v5.3.27
20:47:32:961  INFO 7140 --- [main] com.qyp.chat.MyTest                      : The following 1 profile is active: "dev"
20:47:33:654  INFO 7140 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:47:33:656  INFO 7140 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:47:33:682  INFO 7140 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
20:47:36:635  INFO 7140 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:47:36:817  INFO 7140 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:47:37:067  INFO 7140 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:47:37:070  INFO 7140 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:47:37:101  INFO 7140 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:47:37:249  INFO 7140 --- [main] com.qyp.chat.MyTest                      : Started MyTest in 4.558 seconds (JVM running for 5.343)
20:47:37:252  INFO 7140 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:47:37:461  INFO 7140 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:47:37:793  INFO 7140 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:47:38:045  INFO 7140 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
20:47:38:057  INFO 7140 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
20:49:44:249  INFO 16992 --- [main] com.qyp.chat.MyTest                      : Starting MyTest using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 16992 (started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:49:44:249 DEBUG 16992 --- [main] com.qyp.chat.MyTest                      : Running with Spring Boot v2.7.12, Spring v5.3.27
20:49:44:250  INFO 16992 --- [main] com.qyp.chat.MyTest                      : The following 1 profile is active: "dev"
20:49:44:967  INFO 16992 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:49:44:969  INFO 16992 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:49:44:995  INFO 16992 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
20:49:49:386  INFO 16992 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:49:49:582  INFO 16992 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:49:49:832  INFO 16992 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:49:49:836  INFO 16992 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:49:49:866  INFO 16992 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:49:49:989  INFO 16992 --- [main] com.qyp.chat.MyTest                      : Started MyTest in 6.011 seconds (JVM running for 6.788)
20:49:49:991  INFO 16992 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:49:50:205  INFO 16992 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:49:50:530  INFO 16992 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:49:50:777  INFO 16992 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
20:49:50:797  INFO 16992 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
20:50:34:830  INFO 26120 --- [http-nio-8000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
20:50:34:830  INFO 26120 --- [http-nio-8000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
20:50:34:832  INFO 26120 --- [http-nio-8000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
20:50:35:100 ERROR 26120 --- [http-nio-8000-exec-2] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:50:42:582 DEBUG 26120 --- [http-nio-8000-exec-7] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:50:42:583 DEBUG 26120 --- [http-nio-8000-exec-7] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
20:50:42:584 DEBUG 26120 --- [http-nio-8000-exec-7] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 0
20:50:42:589 ERROR 26120 --- [http-nio-8000-exec-7] c.q.c.exception.GlobalExceptionHandler   : 请求地址:/api/account/login错误
20:50:50:950 ERROR 26120 --- [http-nio-8000-exec-6] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:50:56:129 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:50:56:130 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
20:50:56:132 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 0
20:50:56:151 DEBUG 26120 --- [http-nio-8000-exec-8] com.qyp.chat.mapper.UserMapper.insert    : ==>  Preparing: INSERT INTO user ( user_id, email, nick_name, join_type, password, status, create_time, last_off_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
20:50:56:153 DEBUG 26120 --- [http-nio-8000-exec-8] com.qyp.chat.mapper.UserMapper.insert    : ==> Parameters: Uxv24bl6amhf(String), 2740123221@qq.com(String), 第一人(String), 1(Integer), e10adc3949ba59abbe56e057f20f883e(String), 1(Integer), 2025-01-19T20:50:56.148760300(LocalDateTime), 1737291056148(Long)
20:50:56:155 DEBUG 26120 --- [http-nio-8000-exec-8] com.qyp.chat.mapper.UserMapper.insert    : <==    Updates: 1
20:50:56:159 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.ContactMapper.insert   : ==>  Preparing: INSERT INTO contact ( user_id, contact_id, contact_type, create_time, status, last_update_time ) VALUES ( ?, ?, ?, ?, ?, ? )
20:50:56:160 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.ContactMapper.insert   : ==> Parameters: Uxv24bl6amhf(String), U12345678901(String), 0(Integer), 2025-01-19T20:50:56.158376(LocalDateTime), 1(Integer), 2025-01-19T20:50:56.158376(LocalDateTime)
20:50:56:163 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.ContactMapper.insert   : <==    Updates: 1
20:50:56:172 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.SessionMapper.insert   : ==>  Preparing: INSERT INTO session ( session_id, last_message, last_receive_time ) VALUES ( ?, ?, ? )
20:50:56:173 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.SessionMapper.insert   : ==> Parameters: b8a0796ae643ce201917691f52a6cbac(String), 你好啊！！(String), 1737319856158(Long)
20:50:56:174 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.SessionMapper.insert   : <==    Updates: 1
20:50:56:176 DEBUG 26120 --- [http-nio-8000-exec-8] c.q.c.mapper.UserSessionMapper.insert    : ==>  Preparing: INSERT INTO user_session ( user_id, contact_id, session_id, contact_name ) VALUES ( ?, ?, ?, ? )
20:50:56:177 DEBUG 26120 --- [http-nio-8000-exec-8] c.q.c.mapper.UserSessionMapper.insert    : ==> Parameters: Uxv24bl6amhf(String), U12345678901(String), b8a0796ae643ce201917691f52a6cbac(String), robot(String)
20:50:56:179 DEBUG 26120 --- [http-nio-8000-exec-8] c.q.c.mapper.UserSessionMapper.insert    : <==    Updates: 1
20:50:56:183 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.MessageMapper.insert   : ==>  Preparing: INSERT INTO message ( session_id, message_type, message_content, send_user_id, send_time, contact_id, contact_type, status ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
20:50:56:184 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.MessageMapper.insert   : ==> Parameters: b8a0796ae643ce201917691f52a6cbac(String), 2(Integer), 你好啊！！(String), U12345678901(String), 1737319856158(Long), Uxv24bl6amhf(String), 0(Integer), 1(Integer)
20:50:56:186 DEBUG 26120 --- [http-nio-8000-exec-8] c.qyp.chat.mapper.MessageMapper.insert   : <==    Updates: 1
20:50:58:382 ERROR 26120 --- [http-nio-8000-exec-5] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:51:03:826 DEBUG 26120 --- [http-nio-8000-exec-9] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:51:03:827 DEBUG 26120 --- [http-nio-8000-exec-9] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
20:51:03:828 DEBUG 26120 --- [http-nio-8000-exec-9] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 1
20:51:03:833 DEBUG 26120 --- [http-nio-8000-exec-9] c.q.c.mapper.ContactMapper.selectList    : ==>  Preparing: SELECT user_id,contact_id,contact_type,create_time,status,last_update_time FROM contact WHERE (user_id = ? AND status = ?)
20:51:03:833 DEBUG 26120 --- [http-nio-8000-exec-9] c.q.c.mapper.ContactMapper.selectList    : ==> Parameters: Uxv24bl6amhf(String), 1(Integer)
20:51:03:835 DEBUG 26120 --- [http-nio-8000-exec-9] c.q.c.mapper.ContactMapper.selectList    : <==      Total: 1
20:51:10:373 ERROR 26120 --- [http-nio-8000-exec-10] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:51:11:634 ERROR 26120 --- [http-nio-8000-exec-1] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:51:19:441 ERROR 26120 --- [http-nio-8000-exec-3] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:51:59:135 ERROR 26120 --- [http-nio-8000-exec-2] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:51:59:780 ERROR 26120 --- [http-nio-8000-exec-4] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:52:12:249 DEBUG 26120 --- [http-nio-8000-exec-7] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
20:52:12:250 DEBUG 26120 --- [http-nio-8000-exec-7] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
20:52:12:252 DEBUG 26120 --- [http-nio-8000-exec-7] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 1
20:52:12:257 DEBUG 26120 --- [http-nio-8000-exec-7] c.q.c.mapper.ContactMapper.selectList    : ==>  Preparing: SELECT user_id,contact_id,contact_type,create_time,status,last_update_time FROM contact WHERE (user_id = ? AND status = ?)
20:52:12:259 DEBUG 26120 --- [http-nio-8000-exec-7] c.q.c.mapper.ContactMapper.selectList    : ==> Parameters: Uxv24bl6amhf(String), 1(Integer)
20:52:12:261 DEBUG 26120 --- [http-nio-8000-exec-7] c.q.c.mapper.ContactMapper.selectList    : <==      Total: 1
20:53:12:029 ERROR 26120 --- [http-nio-8000-exec-6] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:53:14:341 ERROR 26120 --- [http-nio-8000-exec-8] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
20:53:36:345  INFO 26120 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
20:53:36:349 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_off_time=? WHERE user_id=?
20:53:36:350 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 1737291216348(Long), Uvhzi47svssc(String)
20:53:36:351 DEBUG 26120 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 0
20:53:43:034  WARN 26120 --- [nioEventLoopGroup-3-2] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0x9c2d18b7, L:/127.0.0.1:5051 - R:/127.0.0.1:51638]

io.netty.channel.ChannelPipelineException: com.qyp.chat.websocket.netty.HandlerWebSocket is not a @Sharable handler, so can't be added or removed multiple times.
	at io.netty.channel.DefaultChannelPipeline.checkMultiplicity(DefaultChannelPipeline.java:600) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:202) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:381) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:370) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at com.qyp.chat.websocket.netty.NettyWebSocketStarter$1.initChannel(NettyWebSocketStarter.java:54) ~[classes/:na]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1114) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

20:53:46:217  WARN 26120 --- [nioEventLoopGroup-3-3] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0x97764ebf, L:/127.0.0.1:5051 - R:/127.0.0.1:51639]

io.netty.channel.ChannelPipelineException: com.qyp.chat.websocket.netty.HandlerWebSocket is not a @Sharable handler, so can't be added or removed multiple times.
	at io.netty.channel.DefaultChannelPipeline.checkMultiplicity(DefaultChannelPipeline.java:600) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:202) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:381) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:370) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at com.qyp.chat.websocket.netty.NettyWebSocketStarter$1.initChannel(NettyWebSocketStarter.java:54) ~[classes/:na]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1114) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

20:54:30:566  INFO 24904 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 24904 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
20:54:30:567 DEBUG 24904 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
20:54:30:567  INFO 24904 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
20:54:31:041  INFO 24904 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
20:54:31:043  INFO 24904 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
20:54:31:064  INFO 24904 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
20:54:31:358  INFO 24904 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
20:54:31:366  INFO 24904 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
20:54:31:366  INFO 24904 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
20:54:31:457  INFO 24904 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
20:54:31:457  INFO 24904 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 864 ms
20:54:32:762  INFO 24904 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
20:54:32:819  INFO 24904 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
20:54:32:910  INFO 24904 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
20:54:32:911  INFO 24904 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
20:54:32:913  INFO 24904 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
20:54:32:936  INFO 24904 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
20:54:33:021  INFO 24904 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 2.691 seconds (JVM running for 3.249)
20:54:33:023  INFO 24904 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
20:54:33:201  INFO 24904 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
20:54:33:416  INFO 24904 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
20:54:33:421  INFO 24904 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
20:55:18:012  INFO 24904 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
20:55:18:057  INFO 24904 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : token:523acda6182c3381135bd75f15f37521
20:55:18:105 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
20:55:18:118 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T20:55:18.069084700(LocalDateTime), Uxv24bl6amhf(String)
20:55:18:125 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
20:55:18:128 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
20:55:18:129 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Uxv24bl6amhf(String)
20:55:18:143 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
20:55:18:147 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
20:55:18:147 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Uxv24bl6amhf(String)
20:55:18:149 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
20:55:18:164 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
20:55:18:164 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Uxv24bl6amhf(String), 1737291056148(Long)
20:55:18:165 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 1
20:55:18:167 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
20:55:18:167 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Uxv24bl6amhf(String), 0(Integer), 1737291056148(Long)
20:55:18:168 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
20:55:23:901  INFO 24904 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
20:55:23:905 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_off_time=? WHERE user_id=?
20:55:23:905 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 1737291323904(Long), Uxv24bl6amhf(String)
20:55:23:912 DEBUG 24904 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
20:55:48:452  WARN 24904 --- [nioEventLoopGroup-3-2] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0xca3d0f7a, L:/127.0.0.1:5051 - R:/127.0.0.1:51818]

io.netty.channel.ChannelPipelineException: com.qyp.chat.websocket.netty.HandlerWebSocket is not a @Sharable handler, so can't be added or removed multiple times.
	at io.netty.channel.DefaultChannelPipeline.checkMultiplicity(DefaultChannelPipeline.java:600) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:202) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:381) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:370) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at com.qyp.chat.websocket.netty.NettyWebSocketStarter$1.initChannel(NettyWebSocketStarter.java:54) ~[classes/:na]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1114) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

20:56:35:411  WARN 24904 --- [nioEventLoopGroup-3-3] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0xd8cfc81f, L:/127.0.0.1:5051 - R:/127.0.0.1:51834]

io.netty.channel.ChannelPipelineException: com.qyp.chat.websocket.netty.HandlerWebSocket is not a @Sharable handler, so can't be added or removed multiple times.
	at io.netty.channel.DefaultChannelPipeline.checkMultiplicity(DefaultChannelPipeline.java:600) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:202) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:381) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:370) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at com.qyp.chat.websocket.netty.NettyWebSocketStarter$1.initChannel(NettyWebSocketStarter.java:54) ~[classes/:na]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1114) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

21:03:03:362  INFO 27368 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 27368 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
21:03:03:363 DEBUG 27368 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
21:03:03:363  INFO 27368 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
21:03:03:829  INFO 27368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
21:03:03:830  INFO 27368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
21:03:03:854  INFO 27368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
21:03:04:152  INFO 27368 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
21:03:04:158  INFO 27368 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
21:03:04:158  INFO 27368 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
21:03:04:239  INFO 27368 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
21:03:04:239  INFO 27368 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 854 ms
21:03:05:291  INFO 27368 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
21:03:05:341  INFO 27368 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
21:03:05:439  INFO 27368 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
21:03:05:440  INFO 27368 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
21:03:05:442  INFO 27368 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
21:03:05:457  INFO 27368 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
21:03:05:549  INFO 27368 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 2.401 seconds (JVM running for 2.933)
21:03:05:550  INFO 27368 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
21:03:05:702  INFO 27368 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
21:03:05:886  INFO 27368 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
21:03:05:891  INFO 27368 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
21:05:09:883  INFO 27368 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
21:05:09:939  INFO 27368 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : token:523acda6182c3381135bd75f15f37521
21:05:09:979 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
21:05:09:992 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T21:05:09.952150300(LocalDateTime), Uxv24bl6amhf(String)
21:05:09:995 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:05:09:998 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
21:05:09:998 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Uxv24bl6amhf(String)
21:05:10:011 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
21:05:10:013 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
21:05:10:014 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Uxv24bl6amhf(String)
21:05:10:016 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
21:05:10:027 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
21:05:10:028 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Uxv24bl6amhf(String), 1737291323904(Long)
21:05:10:029 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 1
21:05:10:031 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
21:05:10:031 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Uxv24bl6amhf(String), 0(Integer), 1737291323904(Long)
21:05:10:033 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
21:05:11:108  INFO 27368 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
21:05:11:143 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_off_time=? WHERE user_id=?
21:05:11:143 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 1737291911142(Long), Uxv24bl6amhf(String)
21:05:11:150 DEBUG 27368 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:05:12:163  WARN 27368 --- [nioEventLoopGroup-3-2] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0x7a129382, L:/127.0.0.1:5051 - R:/127.0.0.1:56544]

io.netty.channel.ChannelPipelineException: com.qyp.chat.websocket.netty.HandlerWebSocket is not a @Sharable handler, so can't be added or removed multiple times.
	at io.netty.channel.DefaultChannelPipeline.checkMultiplicity(DefaultChannelPipeline.java:600) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:202) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:381) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:370) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at com.qyp.chat.websocket.netty.NettyWebSocketStarter$1.initChannel(NettyWebSocketStarter.java:55) ~[classes/:na]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1114) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

21:05:13:478  WARN 27368 --- [nioEventLoopGroup-3-3] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0x0ffbec42, L:/127.0.0.1:5051 - R:/127.0.0.1:56545]

io.netty.channel.ChannelPipelineException: com.qyp.chat.websocket.netty.HandlerWebSocket is not a @Sharable handler, so can't be added or removed multiple times.
	at io.netty.channel.DefaultChannelPipeline.checkMultiplicity(DefaultChannelPipeline.java:600) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:202) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:381) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:370) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at com.qyp.chat.websocket.netty.NettyWebSocketStarter$1.initChannel(NettyWebSocketStarter.java:55) ~[classes/:na]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1114) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

21:05:14:306  WARN 27368 --- [nioEventLoopGroup-3-4] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0x31c2242b, L:/127.0.0.1:5051 - R:/127.0.0.1:56546]

io.netty.channel.ChannelPipelineException: com.qyp.chat.websocket.netty.HandlerWebSocket is not a @Sharable handler, so can't be added or removed multiple times.
	at io.netty.channel.DefaultChannelPipeline.checkMultiplicity(DefaultChannelPipeline.java:600) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:202) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:381) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.addLast(DefaultChannelPipeline.java:370) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at com.qyp.chat.websocket.netty.NettyWebSocketStarter$1.initChannel(NettyWebSocketStarter.java:55) ~[classes/:na]
	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1114) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

21:05:31:025  INFO 29476 --- [main] com.qyp.chat.ChatApplication             : Starting ChatApplication using Java 11.0.12 on LAPTOP-C6F2EJ6P with PID 29476 (D:\Users\qyp\Documents\ideaProjects\Chat\target\classes started by qyp in D:\Users\qyp\Documents\ideaProjects\Chat)
21:05:31:027 DEBUG 29476 --- [main] com.qyp.chat.ChatApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
21:05:31:027  INFO 29476 --- [main] com.qyp.chat.ChatApplication             : The following 1 profile is active: "dev"
21:05:31:596  INFO 29476 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
21:05:31:597  INFO 29476 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
21:05:31:619  INFO 29476 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
21:05:31:914  INFO 29476 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)
21:05:31:919  INFO 29476 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
21:05:31:919  INFO 29476 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
21:05:32:008  INFO 29476 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
21:05:32:008  INFO 29476 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 946 ms
21:05:33:253  INFO 29476 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
21:05:33:302  INFO 29476 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
21:05:33:401  INFO 29476 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path '/api'
21:05:33:402  INFO 29476 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
21:05:33:403  INFO 29476 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
21:05:33:428  INFO 29476 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
21:05:33:514  INFO 29476 --- [main] com.qyp.chat.ChatApplication             : Started ChatApplication in 2.815 seconds (JVM running for 3.73)
21:05:33:516  INFO 29476 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
21:05:33:663  INFO 29476 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
21:05:33:853  INFO 29476 --- [main] com.qyp.chat.InitRun                     : 服务启动成功。
21:05:33:859  INFO 29476 --- [Thread-2] c.q.c.w.netty.NettyWebSocketStarter      : netty启动
21:05:38:918  INFO 29476 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
21:05:38:961  INFO 29476 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : token:523acda6182c3381135bd75f15f37521
21:05:38:996 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
21:05:39:008 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T21:05:38.972600900(LocalDateTime), Uxv24bl6amhf(String)
21:05:39:011 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:05:39:014 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
21:05:39:014 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Uxv24bl6amhf(String)
21:05:39:025 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
21:05:39:028 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
21:05:39:028 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Uxv24bl6amhf(String)
21:05:39:029 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
21:05:39:041 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
21:05:39:041 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Uxv24bl6amhf(String), 1737291911142(Long)
21:05:39:043 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 1
21:05:39:044 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
21:05:39:045 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Uxv24bl6amhf(String), 0(Integer), 1737291911142(Long)
21:05:39:046 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
21:05:40:126  INFO 29476 --- [nioEventLoopGroup-3-1] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
21:05:40:129 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_off_time=? WHERE user_id=?
21:05:40:130 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 1737291940129(Long), Uxv24bl6amhf(String)
21:05:40:132 DEBUG 29476 --- [nioEventLoopGroup-3-1] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:05:41:315  INFO 29476 --- [nioEventLoopGroup-3-2] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
21:05:41:319  INFO 29476 --- [nioEventLoopGroup-3-2] c.q.c.websocket.netty.HandlerWebSocket   : token:523acda6182c3381135bd75f15f37521
21:05:41:323 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
21:05:41:323 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T21:05:41.321539100(LocalDateTime), Uxv24bl6amhf(String)
21:05:41:326 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:05:41:327 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
21:05:41:327 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Uxv24bl6amhf(String)
21:05:41:328 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
21:05:41:328 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
21:05:41:328 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Uxv24bl6amhf(String)
21:05:41:329 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
21:05:41:331 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
21:05:41:331 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Uxv24bl6amhf(String), 1737291940129(Long)
21:05:41:332 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 1
21:05:41:333 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
21:05:41:334 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Uxv24bl6amhf(String), 0(Integer), 1737291940129(Long)
21:05:41:334 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
21:05:42:662  INFO 29476 --- [nioEventLoopGroup-3-2] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
21:05:42:664 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_off_time=? WHERE user_id=?
21:05:42:664 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 1737291942663(Long), Uxv24bl6amhf(String)
21:05:42:667 DEBUG 29476 --- [nioEventLoopGroup-3-2] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:05:47:219  INFO 29476 --- [nioEventLoopGroup-3-3] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
21:05:47:224  INFO 29476 --- [nioEventLoopGroup-3-3] c.q.c.websocket.netty.HandlerWebSocket   : token:523acda6182c3381135bd75f15f37521
21:05:47:227 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
21:05:47:228 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T21:05:47.227307200(LocalDateTime), Uxv24bl6amhf(String)
21:05:47:232 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:05:47:232 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
21:05:47:233 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Uxv24bl6amhf(String)
21:05:47:234 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
21:05:47:236 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
21:05:47:236 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Uxv24bl6amhf(String)
21:05:47:238 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
21:05:47:241 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
21:05:47:241 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Uxv24bl6amhf(String), 1737291942663(Long)
21:05:47:243 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 1
21:05:47:244 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
21:05:47:244 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Uxv24bl6amhf(String), 0(Integer), 1737291942663(Long)
21:05:47:246 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
21:09:19:406  INFO 29476 --- [nioEventLoopGroup-3-3] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
21:09:19:409 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_off_time=? WHERE user_id=?
21:09:19:409 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 1737292159408(Long), Uxv24bl6amhf(String)
21:09:19:417 DEBUG 29476 --- [nioEventLoopGroup-3-3] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:11:37:974  INFO 29476 --- [http-nio-8000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
21:11:37:975  INFO 29476 --- [http-nio-8000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
21:11:37:976  INFO 29476 --- [http-nio-8000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
21:11:37:992 ERROR 29476 --- [http-nio-8000-exec-1] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
21:11:43:056 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
21:11:43:057 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
21:11:43:059 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 0
21:11:43:065 DEBUG 29476 --- [http-nio-8000-exec-3] com.qyp.chat.mapper.UserMapper.insert    : ==>  Preparing: INSERT INTO user ( user_id, email, nick_name, join_type, password, status, create_time, last_off_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
21:11:43:066 DEBUG 29476 --- [http-nio-8000-exec-3] com.qyp.chat.mapper.UserMapper.insert    : ==> Parameters: Udkq7qzrl98r(String), 2740123221@qq.com(String), 第一人(String), 1(Integer), e10adc3949ba59abbe56e057f20f883e(String), 1(Integer), 2025-01-19T21:11:43.064432700(LocalDateTime), 1737292303064(Long)
21:11:43:068 DEBUG 29476 --- [http-nio-8000-exec-3] com.qyp.chat.mapper.UserMapper.insert    : <==    Updates: 1
21:11:43:071 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.ContactMapper.insert   : ==>  Preparing: INSERT INTO contact ( user_id, contact_id, contact_type, create_time, status, last_update_time ) VALUES ( ?, ?, ?, ?, ?, ? )
21:11:43:072 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.ContactMapper.insert   : ==> Parameters: Udkq7qzrl98r(String), U12345678901(String), 0(Integer), 2025-01-19T21:11:43.070891600(LocalDateTime), 1(Integer), 2025-01-19T21:11:43.070891600(LocalDateTime)
21:11:43:073 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.ContactMapper.insert   : <==    Updates: 1
21:11:43:077 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.SessionMapper.insert   : ==>  Preparing: INSERT INTO session ( session_id, last_message, last_receive_time ) VALUES ( ?, ?, ? )
21:11:43:077 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.SessionMapper.insert   : ==> Parameters: e81ef754dc217bae5da98e910b1615ae(String), 你好啊！！(String), 1737292303070(Long)
21:11:43:078 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.SessionMapper.insert   : <==    Updates: 1
21:11:43:079 DEBUG 29476 --- [http-nio-8000-exec-3] c.q.c.mapper.UserSessionMapper.insert    : ==>  Preparing: INSERT INTO user_session ( user_id, contact_id, session_id, contact_name ) VALUES ( ?, ?, ?, ? )
21:11:43:079 DEBUG 29476 --- [http-nio-8000-exec-3] c.q.c.mapper.UserSessionMapper.insert    : ==> Parameters: Udkq7qzrl98r(String), U12345678901(String), e81ef754dc217bae5da98e910b1615ae(String), robot(String)
21:11:43:080 DEBUG 29476 --- [http-nio-8000-exec-3] c.q.c.mapper.UserSessionMapper.insert    : <==    Updates: 1
21:11:43:082 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.MessageMapper.insert   : ==>  Preparing: INSERT INTO message ( session_id, message_type, message_content, send_user_id, send_time, contact_id, contact_type, status ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
21:11:43:083 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.MessageMapper.insert   : ==> Parameters: e81ef754dc217bae5da98e910b1615ae(String), 2(Integer), 你好啊！！(String), U12345678901(String), 1737292303070(Long), Udkq7qzrl98r(String), 0(Integer), 1(Integer)
21:11:43:084 DEBUG 29476 --- [http-nio-8000-exec-3] c.qyp.chat.mapper.MessageMapper.insert   : <==    Updates: 1
21:11:47:982 ERROR 29476 --- [http-nio-8000-exec-2] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
21:11:54:144 DEBUG 29476 --- [http-nio-8000-exec-5] c.qyp.chat.mapper.UserMapper.selectOne   : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE (email = ?)
21:11:54:144 DEBUG 29476 --- [http-nio-8000-exec-5] c.qyp.chat.mapper.UserMapper.selectOne   : ==> Parameters: 2740123221@qq.com(String)
21:11:54:145 DEBUG 29476 --- [http-nio-8000-exec-5] c.qyp.chat.mapper.UserMapper.selectOne   : <==      Total: 1
21:11:54:148 DEBUG 29476 --- [http-nio-8000-exec-5] c.q.c.mapper.ContactMapper.selectList    : ==>  Preparing: SELECT user_id,contact_id,contact_type,create_time,status,last_update_time FROM contact WHERE (user_id = ? AND status = ?)
21:11:54:149 DEBUG 29476 --- [http-nio-8000-exec-5] c.q.c.mapper.ContactMapper.selectList    : ==> Parameters: Udkq7qzrl98r(String), 1(Integer)
21:11:54:150 DEBUG 29476 --- [http-nio-8000-exec-5] c.q.c.mapper.ContactMapper.selectList    : <==      Total: 1
21:12:00:377 ERROR 29476 --- [http-nio-8000-exec-6] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
21:12:07:825 ERROR 29476 --- [http-nio-8000-exec-7] c.qyp.chat.interceptor.LoginInterceptor  : /api/error
21:13:39:218  INFO 29476 --- [nioEventLoopGroup-3-4] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
21:13:39:221  INFO 29476 --- [nioEventLoopGroup-3-4] c.q.c.websocket.netty.HandlerWebSocket   : token:6b8c0deffee274e6a94703ba428d8de1
21:13:39:224 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
21:13:39:224 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T21:13:39.223759300(LocalDateTime), Udkq7qzrl98r(String)
21:13:39:231 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:13:39:232 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
21:13:39:232 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Udkq7qzrl98r(String)
21:13:39:234 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
21:13:39:235 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
21:13:39:235 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Udkq7qzrl98r(String)
21:13:39:236 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
21:13:39:237 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
21:13:39:237 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Udkq7qzrl98r(String), 1737292303064(Long)
21:13:39:238 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 1
21:13:39:239 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
21:13:39:239 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Udkq7qzrl98r(String), 0(Integer), 1737292303064(Long)
21:13:39:240 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
21:14:04:368  INFO 29476 --- [nioEventLoopGroup-3-4] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
21:14:04:370 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_off_time=? WHERE user_id=?
21:14:04:370 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 1737292444369(Long), Udkq7qzrl98r(String)
21:14:04:377 DEBUG 29476 --- [nioEventLoopGroup-3-4] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:14:14:642  INFO 29476 --- [nioEventLoopGroup-3-5] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
21:14:14:646  INFO 29476 --- [nioEventLoopGroup-3-5] c.q.c.websocket.netty.HandlerWebSocket   : token:6b8c0deffee274e6a94703ba428d8de1
21:14:14:650 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
21:14:14:651 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T21:14:14.648953700(LocalDateTime), Udkq7qzrl98r(String)
21:14:14:654 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:14:14:655 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
21:14:14:655 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Udkq7qzrl98r(String)
21:14:14:656 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
21:14:14:657 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
21:14:14:657 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Udkq7qzrl98r(String)
21:14:14:660 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
21:14:14:661 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
21:14:14:661 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Udkq7qzrl98r(String), 1737292444369(Long)
21:14:14:663 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 0
21:14:14:664 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
21:14:14:665 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Udkq7qzrl98r(String), 0(Integer), 1737292444369(Long)
21:14:14:666 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
21:15:28:608  INFO 29476 --- [nioEventLoopGroup-3-5] c.q.c.websocket.netty.HandlerWebSocket   : 断开连接
21:15:28:610 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_off_time=? WHERE user_id=?
21:15:28:611 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 1737292528610(Long), Udkq7qzrl98r(String)
21:15:28:617 DEBUG 29476 --- [nioEventLoopGroup-3-5] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:15:34:308  INFO 29476 --- [nioEventLoopGroup-3-6] c.q.c.websocket.netty.HandlerWebSocket   : 建立连接
21:15:34:311  INFO 29476 --- [nioEventLoopGroup-3-6] c.q.c.websocket.netty.HandlerWebSocket   : token:6b8c0deffee274e6a94703ba428d8de1
21:15:34:314 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.qyp.chat.mapper.UserMapper.updateById  : ==>  Preparing: UPDATE user SET last_login_time=? WHERE user_id=?
21:15:34:315 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.qyp.chat.mapper.UserMapper.updateById  : ==> Parameters: 2025-01-19T21:15:34.313985400(LocalDateTime), Udkq7qzrl98r(String)
21:15:34:322 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.qyp.chat.mapper.UserMapper.updateById  : <==    Updates: 1
21:15:34:322 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.qyp.chat.mapper.UserMapper.selectById  : ==>  Preparing: SELECT user_id,email,nick_name,join_type,sex,password,personal_signature,status,create_time,last_login_time,area_name,area_code,last_off_time FROM user WHERE user_id=?
21:15:34:322 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.qyp.chat.mapper.UserMapper.selectById  : ==> Parameters: Udkq7qzrl98r(String)
21:15:34:323 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.qyp.chat.mapper.UserMapper.selectById  : <==      Total: 1
21:15:34:323 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.q.c.m.U.selectAllUserSession           : ==>  Preparing: select u.* , s.last_message , s.last_receive_time , case when substring(u.contact_id, 1, 1) = 'G' then (select count(*) from `group` g where g.group_id = u.contact_id) else 0 end as memberCount from user_session u, session s where u.session_id = s.session_id and u.user_id = ? order by s.last_receive_time desc
21:15:34:323 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.q.c.m.U.selectAllUserSession           : ==> Parameters: Udkq7qzrl98r(String)
21:15:34:326 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.q.c.m.U.selectAllUserSession           : <==      Total: 1
21:15:34:327 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.q.c.mapper.MessageMapper.selectList    : ==>  Preparing: SELECT message_id,session_id,message_type,message_content,send_user_id,send_user_nick_name,send_time,contact_id,contact_type,file_size,file_name,file_type,status FROM message WHERE (contact_id IN (?) AND send_time > ?)
21:15:34:327 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.q.c.mapper.MessageMapper.selectList    : ==> Parameters: Udkq7qzrl98r(String), 1737292528610(Long)
21:15:34:328 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.q.c.mapper.MessageMapper.selectList    : <==      Total: 0
21:15:34:329 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.q.chat.mapper.ApplyMapper.selectCount  : ==>  Preparing: SELECT COUNT( * ) FROM apply WHERE (receive_user_id = ? AND status = ? AND last_apply_time > ?)
21:15:34:330 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.q.chat.mapper.ApplyMapper.selectCount  : ==> Parameters: Udkq7qzrl98r(String), 0(Integer), 1737292528610(Long)
21:15:34:330 DEBUG 29476 --- [nioEventLoopGroup-3-6] c.q.chat.mapper.ApplyMapper.selectCount  : <==      Total: 1
